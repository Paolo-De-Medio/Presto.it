<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Font -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Righteous&family=Ubuntu:ital,wght@0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700&display=swap" rel="stylesheet">

    <!-- Add the slick-theme.css if you want default styling -->
    <link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css"/>
    <!-- Add the slick-theme.css if you want default styling -->
    <link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick-theme.css"/>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">


    <!-- Css Stylesheet -->
    <link rel="stylesheet" href="./style.css">
    
    <!-- Fontawesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w==" crossorigin="anonymous" />
    
    
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">

    <title>Presto.it!</title>
  </head>
  <body class="bg-light">

    <!-- //NAVBAR -->
      <nav class="navbar navbar-expand-lg navbar-custom sticky-top">
        <div class="container-fluid">
          <a class="ps-5 navbar-brand text-white font-logo" href="./index.html"><i class="fas fa-shipping-fast pe-2 fs-3 tc-accent"></i>Presto.it</a>
          <button id="menu-btn" class="navbar-toggler navbar-button" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"><i id="menu-icon" class="mt-1 fas fa-ellipsis-v tc-accent"></i></span>
          </button>
          <div class="container-fluid d-flex justify-content-end pe-5">
              <div>
                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                          <li class="nav-item text-white">
                            <a class="nav-link active" aria-current="page" href="./annunci.html"><i class="fas fa-handshake tc-accent pe-2"></i>Sfoglia gli annunci</a>
                        </li>
                        <li class="nav-item text-white">
                            <a class="nav-link active" aria-current="page" href="#"><i class="fas fa-tags tc-accent pe-2"></i>Inserisci il tuo annuncio</a>
                        </li>
                        <li class="nav-item text-white">
                            <a class="nav-link" href="#"><i class="fas fa-user-plus tc-accent pe-1 pe-2"></i> Registrati</a>
                        </li>
                        <li class="nav-item text-white">
                            <a class="nav-link" href="#"><i class="fas tc-accent fa-user-check pe-1 pe-2"></i>Accedi</a>
                        </li>
                        </ul>
                    </div>
                </div>
            </div>
            </div>
        </div>
      </nav>


      <!-- SECONDA NAVBAR
      <div class="container-fluid d-flex justify-content-center bg-accent navbar-custom">
          <div class="row">
            <div class=" tc-main mt-3">
                <div class="container-fluid">
                  <div class="navbar-text me-5">
                    <i class="fas fa-search pe-2"></i>
                    <input type="text" placeholder="Cosa cerchi?">
                  </div>
                  <i class="fas fa-clipboard-list pe-2"></i>
                  <div class="navbar-text me-5">
                    <div>
                        <select class="form-select form-select-sm" aria-label=".form-select-sm example">
                            <option selected>Tutte le categorie</option>
                            <option value="1">One</option>
                            <option value="2">Two</option>
                            <option value="3">Three</option>
                          </select>
                    </div>                                 
                  </div>
                  <div class="navbar-text ms-5">
                    <i class="fas fa-euro-sign pe-2"></i>
                    <input type="text" placeholder="Quanto vuoi spendere?">
                  </div>
                </div>
            </div>
          </div>
      </div> -->

<!-- FILTERS -->

<main>
  <div class="container">
    <!--Grid row-->
    <div class="row">

      <!--Grid column-->
      <div class="col-12 col-md-4 mb-4">
        <!-- Section: Sidebar -->
        <section>
          <h2 class="tc-accent mt-3 pb-2">Filtra per: </h2>

          <!-- Section: Filters -->
          <section class="filters">

<!-- Section: Category -->
            <section >
              <h6 class="font-weight-bold mb-2">Categorie:</h6>

              <div id="categoryWrapper" class="form-check pl-0 mb-3">
                <input
                  category-filter='All'
                  type="radio"
                  class="form-check-input"
                  name="category-filter"
                />
                <label
                  class="form-check-label"
                  for="flexRa"
                  >Tutti gli annunci</label
                >
              </div>

            <section class="mb-2 mt-3" filter="price">
              <h6 class="font-weight-bold mt-4 mb-2">Prezzo:</h6>

              <div class="form-check pl-0 mb-3">
                <input
                  price="0-25"
                  type="radio"
                  class="filter-option form-check-input"
                  id="priceFilter"
                  name="materialExampleRadios"
                />
                <label
                  class="form-check-label small text-uppercase card-link-secondary"
                  for="under25"
                  >ESEMPIO</label
                >
              </div>
              
              <!-- Sorting -->

              <div class="select-outline position-relative w-100">
                <h6 class="font-weight-bold mt-4 mb-2">Ordina:</h6>
                <select id="sort" class="mdb-select md-form md-outline">
                  
                  <option value="1">Prezzo Crescente</option>
                  <option value="2">Data aggiunta</option>
                </select>
              </div>
  
                  <!-- Sorting -->
            </section>
            <!-- Section: Price -->

          </section>
          <!-- Section: Filters -->

        </section>
        <!-- Section: Sidebar -->

      </div>
      <!--Grid column-->

      <!--Grid column-->
      <div class="col-12 col-md-8 mb-4">
      <!-- CARD ANNUNCI -->
      <div  class="container-fluid mt-5">
        <div  class="row">
            <div id="adsWrapper">

              </div>


        </section>
        <!-- Section: Block Content -->

        <!--Section: Block Content-->

        <section>


            </div>
        </div>
    </div>


      </div>
      <!--Grid column-->

    </div>
    <!--Grid row-->

  </div>
</main>




<!-- GO UP BUTTON -->
<button onclick="topFunction()" id="myBtn" title="Go to top"><i class="fas fa-arrow-up"></i></button>

  <!-- FOOTER -->

  <footer class="footer container-fluid section-margin bg-footer">
    <div class="row">
        <div class="container-fluid bg-footer py-3 px-3 ">
        <div class="row footer-text ">
            <div class="col-12 col-sm-8 px-5 "> 
                <h3 class="tc-accent font-logo"><i class="fas fa-pepper-hot fs-1 text-white"></i> Team DIPC(M)</h3>
                <p class="fs-5 text-white">Davide Igor Paolo Cecilia</p>
                <p class="fs-5 text-white">P.Iva 1234567890 - Cookie policy - privacy policy</p>
            </div>
            <div class="col-12 col-sm-4 py-3 px-3">
            <h3 class="tc-accent font-logo">Social</h3>
            <ul class="fs-5 text-white">
              <li><i class="fab fa-facebook-square tc-accent"></i> Facebook</li>
              <li><i class="fab fa-instagram tc-accent"></i> Instagram</li>
              <li><i class="fab fa-linkedin tc-accent"></i> LinkedIn</li>
              </i><li><i class="fab fa-twitter-square tc-accent"></i> Twitter</li>
            </ul>
            </div>
        </div>
    </div>
</footer>


    <!-- Modal -->
<div class="modal fade" id="addModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="addModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="addModalLabel">Modal title</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        ...
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Understood</button>
      </div>
    </div>
  </div>
</div>

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js" integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous"></script>
    <script src="./script.js"></script>

    <script>
      fetch('./annunci.json').then(data => data.json()).then(annunci => {
        
        function fillPage(annunci) {
        let adsWrapper = document.querySelector('#adsWrapper')
          adsWrapper.innerHTML = ''


        annunci.forEach(annuncio => {
          let adsCard = document.createElement('div')
          adsCard.classList.add("card" , "p-3" , "mb-3" , "m-0" )

          adsCard.innerHTML = `
          
                    <div class="row d-flex align-items-center justify-content-center">
                      <div class="col-md-4">
                        <img src="https://picsum.photos/200" alt="...">
                      </div>
                      <div class="col-md-6">
                        <div class="card-body">
                          <h5 class="card-title fw-bold ps-3">${annuncio.name}</h5>
                          <p class="card-text ps-3">${annuncio.price} €</p>
                          <p class="card-text ps-3"><small class="text-muted">${annuncio.category}</small></p>
                          <button type="button" class="btn btn-primary" data-bs-toggle="modal"  data-bs-target="#addModal">
                              Launch static backdrop modal
                            </button>

                        </div>
                      </div>
                    </div>
                  </div>

    `
    adsWrapper.appendChild(adsCard)
})
}
  fillPage(annunci)


        function fillCategories() {
          let categoryWrapper = document.querySelector('#categoryWrapper')
          let categorySet = new Set ();
          let array = [];

          annunci.forEach(annuncio => {
          categorySet.add(annuncio.category)
          })

          array = Array.from(categorySet);
          
            for (let i = 0 ; i < array.length ; i++) {
              let catCard = document.createElement('div')

            catCard.innerHTML = `
                <input
                  category-filter='${array[i]}'
                  type="radio"
                  class="form-check-input"
                  name="category-filter"
                />
                <label
                  class="form-check-label"
                  for="flexRadioDefault1"
                  >${array[i]}</label
                >
                `
                categoryWrapper.appendChild(catCard)
        }}
        fillCategories()


        function filterCategory() {
          let filters = document.querySelectorAll('[category-filter]')

              filters.forEach(filter => {
                filter.addEventListener('input' , () => {

                    let check = filter.getAttribute('category-filter')

                    let filtered;
                    if (check === 'All') {
                        filtered = annunci
                    } else {
                        filtered = annunci.filter(annuncio => annuncio.category === check)
                    }
                    fillPage(filtered)
                })
              })}
                filterCategory()
    })

    
      


    </script>



    
  </body>
</html>